<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: Microchip UNG BSP Documentation</title>
    <meta name="generator" content="Antora 3.1.4">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../..">Microchip UNG BSP Documentation</a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Search the docs">
        </div>
      </div>
      <button class="navbar-burger" aria-controls="topbar-nav" aria-expanded="false" aria-label="Toggle main menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="bsp" data-version="2023.12">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="../index.html">BSP Releases</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">ReadMe</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../release-notes/nav.html">Release Notes</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../introduction.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../getting-started.html">Getting started</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../bootloader.html">Bootloader</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Supported HW</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="lan966x.html">LAN966x</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lan966x-boot.html">Booting</a>
  </li>
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="lan966x-restore-secureboot.html">Restoring SecureBoot Images</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lan966x-tfa.html">SecureBoot</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lan966x-tfa_ctl.html">TFA_CTL</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lan966x-flexcom.html">FLEXCOM</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lan966x-usart.html">USART</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lan966x-spi.html">SPI</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lan966x-i2c.html">I2C</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lan966x-qspi.html">QSPI</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lan966x-mmc.html">MMC</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lan966x-pinctrl.html">GPIO</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lan966x-mcan.html">MCAN</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lan966x-wdt.html">Watchdog Timer</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lan966x-aes-sha.html">Crypto HW Accelerators</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lan966x-otp.html">OTP</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lan966x-udphs.html">UDPHS - USB Device</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="sparx5.html">Sparx5</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="lan969x.html">LAN969x</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lan969x-boot.html">Booting</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="restore-secureboot.html">Restoring SecureBoot Images</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lan969x-tfa.html">SecureBoot</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lan969x-flexcom.html">FLEXCOM</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lan969x-usart.html">USART</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lan969x-spi.html">SPI</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lan969x-i2c.html">I2C</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lan969x-qspi.html">QSPI</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lan969x-mmc.html">MMC</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lan969x-pinctrl.html">GPIO</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lan969x-sgpio.html">SGPIO</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lan969x-mcan.html">MCAN</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lan969x-wdt.html">Watchdog Timer</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lan969x-usb.html">USB Host Device</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Network</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../network_overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tools_overview.html">Tools</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../front_ports.html">Front Ports</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">L2 Bridge</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../bridge_configuration.html">Bridge Configuration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Frame Forwarding</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../forwarding_overview.html">Forwarding Overview</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../frame_meta_data.html">Frame Metadata</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../tc/tc-intro.html">TC Introduction</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../tc/tc-flower-vcap.html">TC and VCAP</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../vcap_tool.html">VCAP tool</a>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Ingress</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../basic_qos.html">Basic QoS</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../tc/tc-is1.html">Classification (IS0/IS1)</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../tc/tc-is2.html">ACL (IS2)</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../policing.html">Policing</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Egress</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../scheduling.html">Scheduling</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../frame_preemption.html">Frame Preemption</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../shaping.html">Shaping</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../tc/tc-es2.html">Egress ACL (ES2)</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../tc/tc-etag.html">Basic VLAN tagging</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../tc/tc-es0.html">Rewriter VLAN tagging (ES0)</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../psfp.html">PSFP</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../frer.html">FRER</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Protection switching</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../mrp.html">MRP</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cfm.html">CFM</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ptp.html">PTP</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">BSP Releases</span>
    <span class="version">2023.12</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../../2024.09/index.html">BSP Releases</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../2024.09/index.html">2024.09</a>
        </li>
        <li class="version">
          <a href="../../2024.06/index.html">2024.06</a>
        </li>
        <li class="version">
          <a href="../../2024.03/index.html">2024.03</a>
        </li>
        <li class="version">
          <a href="../../2024.03-1/index.html">2024.03-1</a>
        </li>
        <li class="version is-current">
          <a href="../index.html">2023.12</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="#">Older (on AWS)</a>
      <ul class="versions">
        <li class="version">
          <a href="http://mscc-ent-open-source.s3-eu-west-1.amazonaws.com/public_root/bsp/mscc-brsdk-doc-2023.09-1.html">2023.09-1</a>
        </li>
        <li class="version">
          <a href="http://mscc-ent-open-source.s3-eu-west-1.amazonaws.com/public_root/bsp/mscc-brsdk-doc-2023.09.html">2023.09</a>
        </li>
        <li class="version">
          <a href="http://mscc-ent-open-source.s3-eu-west-1.amazonaws.com/public_root/bsp/mscc-brsdk-doc-2023.06.html">2023.06</a>
        </li>
        <li class="version">
          <a href="http://mscc-ent-open-source.s3-eu-west-1.amazonaws.com/public_root/bsp/mscc-brsdk-doc-2023.03.html">2023.03</a>
        </li>
        <li class="version">
          <a href="http://mscc-ent-open-source.s3-eu-west-1.amazonaws.com/public_root/bsp/mscc-brsdk-doc-2022.12.html">2022.12</a>
        </li>
        <li class="version">
          <a href="http://mscc-ent-open-source.s3-eu-west-1.amazonaws.com/public_root/bsp/mscc-brsdk-doc-2022.09.html">2022.09</a>
        </li>
        <li class="version">
          <a href="http://mscc-ent-open-source.s3-eu-west-1.amazonaws.com/public_root/bsp/mscc-brsdk-doc-2022.06.html">2022.06</a>
        </li>
        <li class="version">
          <a href="http://mscc-ent-open-source.s3-eu-west-1.amazonaws.com/public_root/bsp/mscc-brsdk-doc-2022.03.html">2022.03</a>
        </li>
        <li class="version">
          <a href="http://mscc-ent-open-source.s3-eu-west-1.amazonaws.com/public_root/bsp/mscc-brsdk-doc-2021.12.html">2021.12</a>
        </li>
        <li class="version">
          <a href="http://mscc-ent-open-source.s3-eu-west-1.amazonaws.com/public_root/bsp/mscc-brsdk-doc-2021.09.html">2021.09</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">BSP Releases</a></li>
    <li>Supported HW</li>
    <li><a href="lan966x.html">LAN966x</a></li>
    <li><a href="lan966x-restore-secureboot.html">Restoring SecureBoot Images</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">2023.12</button>
  <div class="version-menu">
    <a class="version is-missing" href="../../2024.09/index.html">2024.09</a>
    <a class="version" href="../../2024.06/supported-hw/lan966x-restore-secureboot.html">2024.06</a>
    <a class="version" href="../../2024.03/supported-hw/lan966x-restore-secureboot.html">2024.03</a>
    <a class="version" href="../../2024.03-1/supported-hw/lan966x-restore-secureboot.html">2024.03-1</a>
    <a class="version is-current" href="lan966x-restore-secureboot.html">2023.12</a>
  </div>
</div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="3">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div class="sect1">
<h2 id="_restoring_secureboot_images"><a class="anchor" href="#_restoring_secureboot_images"></a>1. Restoring SecureBoot Images</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In case of a blank eMMC or NOR device, the following instructions can be applied
for the initial bringup of the LAN966x SoC.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The procedure described here will not work for the PCB8290, as this board
is using a USB device as console and TFA monitor for lan966x it is using
FlexCom3 which is a different device. For this board you will have to use a
flash programmer.  An alternative would be to wire cables to the board to get
access to FlexCom3 to use the method described here.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="ref_info"><a class="anchor" href="#ref_info"></a>1.1. Reference information</h3>
<div class="paragraph">
<p>This is where you can find more details about enabling EVB image restoration:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 42.8571%;">
<col style="width: 42.8572%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SoC Name</th>
<th class="tableblock halign-center valign-top">Strapping Pins</th>
<th class="tableblock halign-center valign-top">Monitor Mode</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LAN966x</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><a href="lan966x-boot.html#pin_modes" class="xref page">LAN966x Strapping Pins</a></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><a href="lan966x-boot.html#uart_monitor" class="xref page">LAN966x UART Monitor</a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_how_to_restore_an_image"><a class="anchor" href="#_how_to_restore_an_image"></a>1.2. How to restore an image</h3>

</div>
<div class="sect2">
<h3 id="tfa_monitor"><a class="anchor" href="#tfa_monitor"></a>1.3. Enable TF-A-Monitor at FC3</h3>
<div class="paragraph">
<p>This section will give an overview on how the TF-A monitor can be loaded to the SoC
and used for e.g. writing a FIP or a GPT image on a flash device.</p>
</div>
<div class="paragraph">
<p>The following description is based on a host PC running Ubuntu Linux:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Set the strapping mode on the eval board to the "Monitor Mode" to enabling the
UART monitor mode.  See previous section for the details.</p>
</li>
<li>
<p>Connect the eval board via USB cable to the host PC.</p>
</li>
<li>
<p>The host machine should now enumerate a new TTY device like e.g. '/dev/ttyACM0'.</p>
</li>
<li>
<p>From now on, no other application should be attached to this port (e.g. Putty or
Termhub).</p>
</li>
<li>
<p>Use a Chrome or MS Edge browser and open the fwu.html file in the address bar.
This file can be found inside the artifacts archive.</p>
</li>
</ol>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="../_images/bl1_cont2_old.png" alt="bl2">
</div>
</div>
<div class="paragraph">
<p>Please follow the instructions and the red markers, illustrated on the previous
screenshot.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Arrow #1, Press the <strong>[Connect Device]</strong> button</p>
</li>
<li>
<p>Arrow #2, Choose the appropriate console interface in the dropdown menu</p>
</li>
<li>
<p>Arrow #3, Press <strong>[Connect]</strong> button</p>
</li>
<li>
<p>After successful connection, the 'BL1 bootstrap' page should be loaded.</p>
</li>
</ol>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="../_images/bl1_cont3_old.png" alt="bl3">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Arrow #1, Press the <strong>[Download BL2U]</strong> button</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>After uploading and execution, the 'BL2U bootstrap' screen should be appear.</p>
</div>
<div class="sect3">
<h4 id="program_nor"><a class="anchor" href="#program_nor"></a>1.3.1. Program NOR with FIP</h4>
<div class="paragraph">
<p>The main purpose of this description is to a write a FIP file to a blank NOR
device. Be aware, that only a FIP file format can be written to the NOR flash.
Using a GPT file will not work here.</p>
</div>
<div class="paragraph">
<p>When writing a FIP to the NOR, following methods can be used:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Attach a SPI flasher to the board and write the FIP to the memory address offset of 0x0 (zero).</p>
</li>
<li>
<p>Use the HTML5 based firmware update browser tool (fwu.html).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This section will describe, how to proceed with the second approach here. Therefore
no further programmer hardware is required.</p>
</div>
<div class="paragraph">
<p>The following description assumes that the TF-A monitor mode has been started.</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="../_images/bl2u_menue_old.png" alt="bl2u">
</div>
</div>
<div class="paragraph">
<p>Please follow according the instructions and the red markers, illustrated on
the previous screenshot.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Arrow #1, Choose now the proper .fip file <strong>[Choose File]</strong>.</p>
</li>
<li>
<p>Arrow #2, Upload the file by pressing the <strong>[Upload file]</strong> button.</p>
</li>
<li>
<p>Arrow #3, If the upload is finished, change dropdown value to <strong>[NOR Flash]</strong> device.</p>
</li>
<li>
<p>Arrow #3, Afterwards the <strong>[Write FIP Image]</strong> button can be pressed.</p>
</li>
<li>
<p>Wait till the write NOR procedure is completed. The process can take a few minutes.</p>
</li>
<li>
<p>The progress can be checked anytime inside the <strong>[Log:]</strong> field.</p>
</li>
<li>
<p>Change the strapping mode back to 0x1 or 0x4 for the NOR boot mode.
See <a href="#ref_info">Reference Information</a></p>
</li>
<li>
<p>Reset the board</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="emmc_gpt"><a class="anchor" href="#emmc_gpt"></a>1.3.2. Program eMMC with GPT image</h4>
<div class="paragraph">
<p>The main purpose of this description is to a write a GPT image to a blank eMMC or
SDCard device. Writing this image will trigger following actions to the device:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create a GPT based partition table and all required partitions.</p>
</li>
<li>
<p>Store a FIP file inside the 'fip' named partition.</p>
</li>
<li>
<p>According the chosen GPT image, the BL33 can contain an 'UBoot' or a 'Linux'
as data payload.</p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
A simple file copy of the GPT image to the eMMC or SDCard device will
not work here ! A raw byte copy needs to be established here.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The GPT image can be written to the eMMC device using following methods:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Using UBoot with network and upload/write the GPT image with mmc commands</p>
</li>
<li>
<p>Using external programmers and write the GPT image to the eMMC address offset of 0x0 (zero).</p>
</li>
<li>
<p>Use the HTML5 based firmware update browser tool (fwu.html).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This section will describe, how to proceed with the third approach here. Therefore
no further programmer hardware is required.</p>
</div>
<div class="paragraph">
<p>First boot into the TF-A monitor using the correct strapping pin setting.
See <a href="#ref_info">Reference Information</a></p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="../_images/bl2u_gpt_old.png" alt="bl2u_gpt">
</div>
</div>
<div class="paragraph">
<p>Please follow the instructions and the red markers, illustrated on the previous
screenshot.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Arrow #1, Choose now the proper .gpt file <strong>[Choose File]</strong></p>
</li>
<li>
<p>Arrow #2, Upload the file by pressing the <strong>[Upload file]</strong> button</p>
</li>
<li>
<p>Arrow #3, If the upload is finished, check dropdown value is set to <strong>[eMMC]</strong> device</p>
</li>
<li>
<p>Arrow #3, Afterwards the <strong>[Write Flash Image]</strong> button can be pressed</p>
</li>
<li>
<p>Wait till the write procedure is completed. This process can take a few minutes.</p>
</li>
<li>
<p>The progress can be checked anytime inside the <strong>[Log:]</strong> field.</p>
</li>
<li>
<p>Change the strapping mode back to 0x0 or 0x3 for the eMMC boot mode. See the
reference section for more info.</p>
</li>
<li>
<p>Reset the board</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_programm_emmc_with_fip"><a class="anchor" href="#_programm_emmc_with_fip"></a>1.3.3. Programm eMMC with FIP</h4>
<div class="paragraph">
<p>A FIP file can only be programmed, if the eMMC device is already partitioned.
If not please follow the description of: <a href="#emmc_gpt">Program eMMC with GPT Image</a></p>
</div>
<div class="paragraph">
<p>This description is also valid for updating an existing FIP on the target.</p>
</div>
<div class="paragraph">
<p>The FIP file can be written by using one of this following methods.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Using UBoot console with network and upload/write the FIP using mmc commands</p>
</li>
<li>
<p>Use the HTML5 based firmware update browser tool (fwu.html).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>We will focus here on the second approach.</p>
</div>
<div class="paragraph">
<p>First Boot into the TF-A monitor using the correct strapping pin setting.
See <a href="#ref_info">Reference Information</a></p>
</div>
<div class="paragraph">
<p>Afterwards follow the description based on the BL2U bootstrap monitor page:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="../_images/bl2u_menue_old.png" alt="bl2u">
</div>
</div>
<div class="paragraph">
<p>The following instructions and the red markers illustrating the needed actions.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Arrow #1, Choose now the proper .fip file <strong>[Choose File]</strong></p>
</li>
<li>
<p>Arrow #2, Upload the file by pressing the <strong>[Upload file]</strong> button</p>
</li>
<li>
<p>Arrow #3, If the upload is finished, check dropdown value is set to <strong>[eMMC]</strong> device</p>
</li>
<li>
<p>Arrow #3, Afterwards the <strong>[Write FIP Image]</strong> button can be pressed</p>
</li>
<li>
<p>Wait till the write eMMC procedure is completed. This process can take a few minutes.</p>
</li>
<li>
<p>The progress can be checked anytime inside the <strong>[Log:]</strong> field.</p>
</li>
<li>
<p>Change the strapping mode back to 0x0 or 0x3 for the eMMC boot mode.
See <a href="#ref_info">Reference Information</a></p>
</li>
<li>
<p>Reset the board</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  This page was built using <a href="https://antora.org">Antora</a>
</footer>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" data-stylesheet="../../../_/css/search.css"></script>
<script async src="../../../search-index.js"></script>
  </body>
</html>
